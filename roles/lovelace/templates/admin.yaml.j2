{% extends "tools/view_layout.yaml.j2" %}
{% block cardlist %}
  - type: 'custom:auto-entities'
    card:
      type: entities
      title: Niveau Batteries
    filter:
      include:
        - attributes:
            device_class: battery
            unit_of_measurement: '%'
          state: < 100
          options:
            type: 'custom:battery-entity-row'
            warning: 50
            critical: 25
            charging: true
      exclude:
        - device: Mi A2*
        - device: '*iPhone*'
        - device: '*Maheva*'
        - device: '*M2004J19C*'
    sort:
      method: state
      numeric: true
  - type: 'custom:stack-in-card'
    mode: horizontal
    title: 'Unifi update'
    keep:
      margin: false
      border_radius: true
    cards:
      - type: 'custom:button-card'
        name: USG
        icon: 'mdi:security-network'
        styles:
          card:
            - background-color: |
                [[[
                  if (states["device_tracker.usg"].attributes.upgradable == true) return 'orange';
                ]]]
          name:
            - font-size: 13px
      - type: 'custom:button-card'
        name: Switch
        icon: 'mdi:server-network'
        styles:
          card:
            - background-color: |
                [[[
                  if (states["device_tracker.us16p150"].attributes.upgradable == true) return 'orange';
                ]]]
          name:
            - font-size: 13px
      - type: 'custom:button-card'
        name: AP SAM
        icon: 'mdi:access-point'
        styles:
          card:
            - background-color: |
                [[[
                  if (states["device_tracker.uap_ac_lr_sam"].attributes.upgradable == true) return 'orange';
                ]]]
          name:
            - font-size: 13px
      - type: 'custom:button-card'
        name: AP Garage
        icon: 'mdi:access-point'
        styles:
          card:
            - background-color: |
                [[[
                  if (states["device_tracker.uap_ac_lite_garage"].attributes.upgradable == true) return 'orange';
                ]]]
          name:
            - font-size: 13px
      - type: 'custom:button-card'
        name: AP Cabanon
        icon: 'mdi:access-point'
        styles:
          card:
            - background-color: |
                [[[
                  if (states["device_tracker.uap_ac_lite_cabanon"].attributes.upgradable == true) return 'orange';
                ]]]
          name:
            - font-size: 13px
  - type: 'custom:auto-entities'
    card:
      type: entities
      title: OTA
    filter:
      include:
        - entity_id: '*update_available*'
          state: 'on'
{% endblock %}
